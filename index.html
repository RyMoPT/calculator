<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <head>
<title>Making a calculator</title>
<link rel="stylesheet" type="text/css" href="style.css" />
    </head>
    <body>
      
        <div class= 'header'>
            <h3>Calculator</h3>
        </div>

        <div class = container>
        <div class = theDisplay>0</div>
            <button class="btn item nine" id='9'>9</button>
            <button class="btn item eight" id= '8'>8</button>
            <button class="btn item seven" id= '7'>7</button>
            <button class="btn item six" id= '6'>6</button>
            <button class="btn item five" id='5'>5</button>
            <button class="btn item four" id='4'>4</button>
            <button class="btn item three" id='3'>3</button>
            <button class="btn item two" id='2'>2</button>
            <button class="btn item one" id='1'>1</button>
            <button class="btn item zero" id='0'>0</button>
            <button class="btn func add" id='+'>+</button>
            <button class="btn func subtract" id='-'>-</button>
            <button class="btn func multiply" id='*'>*</button>
            <button class="btn func divide" id='/'>/</button>
            <button class="btn decimal" id='.'>.</button>
            <button class="btn clear">Clear</button>
            <button class="btn equal" id='equal'>=</button>
            <button class="btn back" id='back'> Back </button>
    </div>
    <script>
    
        
    function add(a,b) {
        return a+b;
    }
    function subtract(a,b) {
        return a-b;
    }
    function multiply(a,b) {
        return a*b;
    }
    function divide(a,b) {
        return a/b;
    }

    
    function operate(operator,a,b) {
        switch (operator) {
            case '+':
            return add(a,b);
            break;
            
            case '-':
            return subtract(a,b)
            break;

            case '*':
            return multiply(a,b)
            break;

            case '/':
            return divide(a,b)

            default:
            return currentNumber;
        }}
        // if (operator === add) {
        //     return add(a,b);
        // }
        // else if (operator === subtract) {
        //     return subtract(a,b);
        // }
        // else if (operater === multiply) {
        //     return multiply(a,b);
        // }
        // else if (operator === divide) {
        //     return divide(a,b);
        // }

   // }

    const button = document.querySelectorAll('.item');
    const display = document.querySelector(".theDisplay");
    const equal = document.querySelector(".equal");
    const clear = document.querySelector(".clear");
    const mathFunctions = document.querySelectorAll(".func");
    const decimal = document.querySelector(".decimal");
    const back = document.querySelector(".back");
    


    let currentNumber= "";
    let storedNumber= 0;
    let result=0;

//listening for numbers
    for (i=0; button.length > i; i++) {
    button[i].addEventListener('click', function(e) {
        currentNumber = (currentNumber + this.id);
        display.innerHTML = (currentNumber);
        console.log(this.id);
    })};

    //adding decimal to currentNumber on display. Also removes decimal button on click
    decimal.addEventListener('click', function(e) {
        currentNumber = parseFloat(currentNumber) + this.id;
        display.innerHTML = (currentNumber);
        decimal.style.display = 'none';
        console.log(this.id);
    });
    
    //Stores the operator used and the previously entered number. Resets current number to 0. Also brings back decimal button.
    for (i=0; mathFunctions.length > i; i++) {
    mathFunctions[i].addEventListener('click', function(e) {
        randomOperator = this.id;
        storedNumber = (currentNumber);
        currentNumber='';
        display.innerHTML = this.id;
        decimal.style.display = 'inline';
        console.log(this.id);
    })};

    // Performs operate function and the 2 numbers. If user tries to divide by 0, gets error msg.
    equal.addEventListener('click', function(e) {
        console.log(randomOperator,storedNumber,currentNumber);
        if (randomOperator==='/' && currentNumber==='0') {
            display.innerHTML= 'Nice try.';
        }else {
            result = result + storedNumber;
            result = operate(randomOperator,Number(storedNumber),Number(currentNumber));
            console.log(randomOperator,storedNumber,currentNumber,result);
            if (result.toString().length >= 8) {
                display.innerHTML = result.toFixed(4);
            }else { display.innerHTML = result;}
            currentNumber='';
            
            }});
    
    //Clear button to reset everything to 0.
    clear.addEventListener('click', function(e) {
        result=0;
        storedNumber=0;
        currentNumber='';
        randomOperator=0;
        decimal.style.display = 'inline';
        display.innerHTML = result;

    });
    
    //Back button converting to string then removing last character before converting back into a number
    back.addEventListener('click', function(e) {
        //convert to string
        currentNumber = currentNumber.toString();
        //remove last character from string
        currentNumber = currentNumber.substring(0, currentNumber.length -1);
        display.innerHTML = currentNumber;
        //convert back to number
        currentNumber = Number(currentNumber);
    });

    

    

    
    
    </script>
    </body>
    <footer>
        <h1>Designed by <a href='https://github.com/RyMoPT'>RyMoPT</a></h1>
    </footer>
</html>